DistrictBuilder command-line interface
======================================

Note: the majority of this README is auto-generated by running `./node_modules/.bin/oclif-dev readme`.
If there are any changes to the commands/arguments/parameters, run that command to regenerate this file.
The auto-generated README assumes that this CLI will be packaged up and put on NPM. This may be the case
in the future, but until then, commands may be run using `./scripts/manage` rather than using the binary `manage`.
For example, to see help on the `process-geojson`, run: `./scripts/manage process-geojson --help`.

<!-- toc -->
* [Usage](#usage)
* [Commands](#commands)
<!-- tocstop -->
# Usage
<!-- usage -->
```sh-session
$ npm install -g manage
$ manage COMMAND
running command...
$ manage (-v|--version|version)
manage/0.1.0 linux-x64 node-v12.18.4
$ manage --help [COMMAND]
USAGE
  $ manage COMMAND
...
```
<!-- usagestop -->
# Commands
<!-- commands -->
* [`manage help [COMMAND]`](#manage-help-command)
* [`manage process-geojson FILE`](#manage-process-geojson-file)
* [`manage publish-region STATICDATADIR COUNTRYCODE REGIONCODE REGIONNAME`](#manage-publish-region-staticdatadir-countrycode-regioncode-regionname)
* [`manage update-region STATICDATADIR UPDATES3DIR`](#manage-update-region-staticdatadir-updates3dir)

## `manage help [COMMAND]`

display help for manage

```
USAGE
  $ manage help [COMMAND]

ARGUMENTS
  COMMAND  command to show help for

OPTIONS
  --all  see all commands in CLI
```

_See code: [@oclif/plugin-help](https://github.com/oclif/plugin-help/blob/v2.2.3/src/commands/help.ts)_

## `manage process-geojson FILE`

process GeoJSON into desired output files

```
USAGE
  $ manage process-geojson FILE

OPTIONS
  -b, --big                            Use this for big GeoJSON files (~1GB+) that need to be streamed

  -d, --demographics=demographics      [default: population,white,black,asian,hispanic,other] Comma-separated census
                                       demographics to select and aggregate

  -l, --levels=levels                  [default: block,blockgroup,county] Comma-separated geolevel hierarchy: smallest
                                       to largest
                                       To use a different name for the layer ID from the GeoJSON property,
                                       separate values by ':'
                                       e.g. -l geoid:block,blockgroupuuid:blockgroup,county

  -n, --levelMinZoom=levelMinZoom      [default: 8,0,0] Comma-separated minimum zoom level per geolevel, must match # of
                                       levels

  -o, --outputDir=outputDir            [default: ./] Directory to output files

  -s, --simplification=simplification  [default: 0.000000025] Topojson simplification amount (minWeight)

  -u, --inputS3Dir=inputS3Dir          S3 directory for the previous run if we will be updating in-place

  -x, --levelMaxZoom=levelMaxZoom      [default: g,g,g] Comma-separated maximum zoom level per geolevel, must match # of
                                       levels

DESCRIPTION
  Note: this can be a very memory-intensive operation,
  depending on the size of the GeoJSON. If you receive
  an error related to memory usage, you can increase
  the Node.js memory limit by setting the following
  environment variable (as large as needed):

  NODE_OPTIONS="--max-old-space-size=14336"

  Relatedly, set the -b flag for very large GeoJSON files
  that need to be streamed. This is slower, so only use
  it when necessary (file sizes ~1GB+).
```

## `manage publish-region STATICDATADIR COUNTRYCODE REGIONCODE REGIONNAME`

upload processed region files to S3

```
USAGE
  $ manage publish-region STATICDATADIR COUNTRYCODE REGIONCODE REGIONNAME

ARGUMENTS
  STATICDATADIR  Directory of the region's static data (the output of `process-geojson`)
  COUNTRYCODE    Country code, e.g. US
  REGIONCODE     Region code, e.g. PA
  REGIONNAME     Name of the region, e.g. Pennsylvania

OPTIONS
  -b, --bucketName=bucketName  [default: global-districtbuilder-dev-us-east-1] Bucket to upload the files to
```

## `manage update-region STATICDATADIR UPDATES3DIR`

update processed region files in-place on S3

```
USAGE
  $ manage update-region STATICDATADIR UPDATES3DIR

ARGUMENTS
  STATICDATADIR  Directory of the region's static data (the output of `process-geojson`)
  UPDATES3DIR    S3 directory to update in-place
```
<!-- commandsstop -->
